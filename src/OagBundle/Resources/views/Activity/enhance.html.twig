{% extends 'OagBundle::Default/index.html.twig' %}

{% block title %}OagBundle:Activity:enhance{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('bundles/oag/neonmap/dist/neonmap.css') }}" rel="stylesheet" />
{% endblock %}

{% block h2 %}{{ activity.name }} [{{ activity.id }}]{% endblock %}

{% block body %}

    <div id="existing-locations">
        <h3>Existing locations</h3>
        <div id="existing-map-block"
             data-geojson='{{ mapdata }}'
             ></div>
    </div>

    <div id='activities'>
        <h3>Sectors</h3>
        {{ form(form) }}
    </div>

    <h3>Past changes to activity</h3>
    <ul>
        {% for pastChange in pastChanges|reverse %}
            <li>
                <p>{{ pastChange.getTimestamp() | date("l, d-M-y H:i:s T") }}</p>
                Added tags:
                <ul>
                    {% for tag in pastChange.getAddedTags() %}
                        <li>{{ tag.description }} ({{ tag.code }}) - {{ tag.id }}</li>
                    {% endfor %}
                </ul>
                Removed tags:
                <ul>
                    {% for tag in pastChange.getRemovedTags() %}
                        <li>{{ tag.description }} ({{ tag.code }}) - {{ tag.id }}</li>
                    {% endfor %}
                </ul>
            </li>
        {% endfor %}
    </ul>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/oag/neonmap/dist/neonmap.js') }}"></script>
    <script>
        $( document ).ready(function() {
            $('#existing-map-block').neonmap({image_path: "{{ asset('bundles/oag/neonmap/dist/images') }}" });
        });
    </script>
{% endblock %}

{#
    <ul>
        <li>Show existing tags as checked checkboxes</li>
        <li>Show classifier results for this (activity|document)?, not sure which check with Kat/Harry</li>
        <li>Show a block of tags as checkboxes for each $file->getEnhancingDocuments()</li>
    </ul>

    <p>Submit merges to new XML and overwites the existing IATI XML document identified by route param ID.</p>
    <p>Any smart ideas about versioning welcome</p>

    <p>
        <a href='{{ path('oag_classify_oagfile', { 'id': id  }) }}'>Classify</a>
    </p>

    <p>
    </p>
#}
