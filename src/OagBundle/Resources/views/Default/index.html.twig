{# This inherits from /app/Resources/views/base.html.twig #}
{% extends 'base.html.twig' %}

{% block stylesheets %}

{% stylesheets
    'bundles/oag/stylesheets/normalize.css'
    'bundles/oag/sass/main.scss'
%}
    <link rel="stylesheet" href="{{ asset_url }}" />
{% endstylesheets %}

{% endblock %}

{% block title %}{{ toolbox_title }}{% endblock %}

{% block h2 %}Open Ag Toolbox{% endblock %}

{% block body %}

    <section>

        <div class="content">

            <h2>IATI Documents</h2>

            <ul>
                {% for iatidoc in iatidocs %}
                    <li>
                        <a href="{{ path('oag_dportal_oagfile', { 'id': iatidoc.id }) }}" target="dportal">[Visualise]</a>
                        {{ include('OagBundle::Default/iatiFile.html.twig', { 'iatiDoc': iatidoc }) }}
                        <ul>
                            {% for enhancingDoc in iatidoc.enhancingDocuments %}
                                <li>
                                    {{ include('OagBundle::Default/enhancementFile.html.twig', { 'enhancingDoc': enhancingDoc }) }}
                                </li>
                            {% endfor %}
                        </ul>
                    </li>
                {% endfor %}
            </ul>

        </div>

    </section>

    <section>

        <div class="content">

            <h2>Unvalidated IATI Documents</h2>

            <ul>
                {% for sourceDoc in sourceDocs %}
                    <li>
                        {{ include('OagBundle::Default/sourceFile.html.twig', { 'sourceDoc': sourceDoc }) }}
                    </li>
                {% endfor %}
            </ul>

            <div class="upload-form">
                <h3>Import a new source document</h3>
                <hr>
                <div>The imported document will be automatically processed with CoVE and added to the IATI document list above.</div>
                <div>Currently only XML is supported.</div>
                {{ include('OagBundle::widgets/fileUploadWidget.html.twig', { 'form': source_upload_form }) }}
            </div>

        </div>

    </section>

    <section>

        <div class="content">

            <h2>Enhancement Documents <small>[activities/locations]</small></h2>

            <ul>
                {% for enhancingDoc in enhancingDocs %}
                    <li>
                        {{ include('OagBundle::Default/enhancementFile.html.twig', { 'enhancingDoc': enhancingDoc }) }}
                    </li>
                {% endfor %}
            </ul>

        </div>

    </section>

{% endblock %}

{% block javascripts %}
    <script type="text/javascript" src="{{ asset('bundles/oag/js/main.js') }}"></script>
    <script>
        $(function () {
            $(document).tooltip();

            $("#select-all-delete").click(function () {
                var checkBoxes = $(".cbox-del");
                checkBoxes.prop("checked", !checkBoxes.prop("checked"));
            });
        });
    </script>
{% endblock %}
